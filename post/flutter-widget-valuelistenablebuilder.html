<!DOCTYPE html><html lang="en" class="bg-white dark:bg-black dark:text-white"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="A statically generated blog example using Next.js and Markdown."/><meta property="og:image" content="https://og-image.now.sh/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>flutter-widget-valuelistenablebuilder | kaichi</title><meta property="og:image"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/c6336140448e1cdbc471.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c6336140448e1cdbc471.css" data-n-g=""/><link rel="preload" href="/_next/static/css/c006223587f4ab413ba7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/c006223587f4ab413ba7.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.1cddd991bfe63666dc71.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3f968674ded198e62373.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-260307c6a9ede051e356.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-3772c090bbea1cf81484.js" as="script"/><link rel="preload" href="/_next/static/chunks/0879be9613c02dd19f62f704d2438c311bfd41fd.9c48058b5a830067898b.js" as="script"/><link rel="preload" href="/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.864bf8457325a26ebada.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bslug%5D-0029e7a04e9699966c2e.js" as="script"/></head><body><div id="__next"><div class="px-8"><header class="py-8 flex items-center justify-between bg-white dark:bg-black"><a href="/"><img class="filter dark:invert" src="/assets/kaichi.webp"/></a><nav class="hidden md:block space-x-8"><a class="nav-item_nav-item__16Hxn text-primary-light dark:text-primary-dark" href="/"><span class="text-black dark:text-white">Home</span></a><a class="nav-item_nav-item__16Hxn text-primary-light dark:text-primary-dark" href="/me"><span class="text-black dark:text-white">Me</span></a></nav></header><main class="max-w-screen-xl m-auto"><article class="mt-16 py-12 px-8"><div class="flex heroPost_post-container__3UFqM"><div class="heroPost_post-content__3MEd-"><div class="-ml-1 mb-4"><a href="/post/flutter-widget-valuelistenablebuilder" class="text-primary-light dark:text-primary-dark font-bold link_global-underline__3hxrZ text-6xl"><span class="text-black dark:text-white">Flutter Widget: ValueListenableBuilder</span></a></div><div class="flex mb-4 text-base items-center">2 days<!-- --> by <!-- -->kaichi<img src="/assets/authors/kaichi.jpeg" class="w-12 h-12 rounded-full ml-4 ring-white ring-2" alt="kaichi"/></div><div class="flex py-4 space-x-6"><a href="https://github.com/kaichii" aria-label="link Github" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="20" height="20"><path d="M511.543 14.057C228.914 13.943 0 242.743 0 525.143 0 748.457 143.2 938.286 342.629 1008c26.857 6.743 22.742-12.343 22.742-25.371v-88.572C210.286 912.23 204 809.6 193.6 792.457c-21.029-35.886-70.743-45.028-55.886-62.171 35.315-18.172 71.315 4.571 113.029 66.171 30.171 44.686 89.028 37.143 118.857 29.714 6.514-26.857 20.457-50.857 39.657-69.485C248.571 727.886 181.6 629.829 181.6 513.257c0-56.571 18.629-108.571 55.2-150.514-23.314-69.143 2.171-128.343 5.6-137.143 66.4-5.943 135.429 47.543 140.8 51.771C420.914 267.2 464 261.83 512.229 261.83c48.457 0 91.657 5.6 129.714 15.885 12.914-9.828 76.914-55.771 138.628-50.171 3.315 8.8 28.229 66.628 6.286 134.857 37.029 42.057 55.886 94.514 55.886 151.2 0 116.8-67.429 214.971-228.572 243.314a145.714 145.714 0 0 1 43.543 104v128.572c0.915 10.285 0 20.457 17.143 20.457 202.4-68.229 348.114-259.429 348.114-484.686 0-282.514-229.028-511.2-511.428-511.2z" p-id="1619"></path></svg></a><a href="https://music.163.com/#/user/home?id=276894900" aria-label="link Netease" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="22" height="22"><path d="M512 938.666667C276.352 938.666667 85.333333 747.648 85.333333 512S276.352 85.333333 512 85.333333s426.666667 191.018667 426.666667 426.666667-191.018667 426.666667-426.666667 426.666667z m-46.336-445.098667c10.24-35.84 45.866667-65.749333 84.906667-70.314667 7.978667 29.610667 16.554667 58.581333 23.253333 88.021334 2.261333 9.813333 1.578667 21.12-0.768 31.018666-9.088 38.058667-53.248 52.992-84.394667 29.226667-22.613333-17.28-31.658667-47.786667-22.997333-77.952z m162.858667-8.405333c-5.333333-19.84-10.922667-39.552-16.768-60.586667 21.333333 5.546667 38.741333 15.36 53.546666 29.781333 53.632 52.096 59.093333 140.8 12.544 201.856-48.426667 63.573333-134.613333 91.050667-214.528 68.48-98.218667-27.733333-162.474667-125.952-146.816-226.816 11.690667-75.434667 54.186667-128.170667 123.733334-159.274666 17.365333-7.765333 24.746667-23.893333 17.92-39.68-6.698667-15.530667-23.04-21.504-40.277334-14.634667-116.096 46.464-184.32 176.384-156.586666 298.112 30.421333 133.034667 149.12 220.288 284.8 207.317333 73.898667-7.04 134.997333-40.448 179.882666-100.138666 64.256-85.418667 55.338667-204.074667-19.754666-277.290667-28.416-27.733333-62.762667-43.434667-101.973334-49.194667-3.541333-0.554667-9.258667-2.218667-9.898666-4.522666-3.712-13.354667-7.68-26.965333-8.789334-40.704-1.237333-15.232 12.373333-27.306667 27.733334-27.52 10.794667-0.128 18.517333 5.546667 25.728 12.8 12.928 12.8 30.037333 13.738667 42.154666 2.645333 12.373333-11.264 12.629333-28.928 0.768-43.008-24.149333-28.672-67.669333-38.016-103.68-22.314667-36.138667 15.786667-56.362667 50.645333-51.2 89.301334 1.621333 11.946667 4.693333 23.765333 7.125334 35.925333l-11.093334 3.072a164.821333 164.821333 0 0 0-89.514666 60.330667c-39.296 52.053333-39.936 120.661333-1.749334 168.405333 54.357333 68.010667 159.872 54.784 192.981334-24.234667 12.117333-28.842667 11.733333-58.368 3.712-88.106666z" p-id="3070"></path></svg></a><a href="https://space.bilibili.com/12951817" aria-label="link Bilibili" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="22" height="22"><path d="M777.514667 131.669333a53.333333 53.333333 0 0 1 0 75.434667L728.746667 255.829333h49.92A160 160 0 0 1 938.666667 415.872v320a160 160 0 0 1-160 160H245.333333A160 160 0 0 1 85.333333 735.872v-320a160 160 0 0 1 160-160h49.749334L246.4 207.146667a53.333333 53.333333 0 1 1 75.392-75.434667l113.152 113.152c3.370667 3.370667 6.186667 7.04 8.448 10.965333h137.088c2.261333-3.925333 5.12-7.68 8.490667-11.008l113.109333-113.152a53.333333 53.333333 0 0 1 75.434667 0z m1.152 231.253334H245.333333a53.333333 53.333333 0 0 0-53.205333 49.365333l-0.128 4.010667v320c0 28.117333 21.76 51.157333 49.365333 53.162666l3.968 0.170667h533.333334a53.333333 53.333333 0 0 0 53.205333-49.365333l0.128-3.968v-320c0-29.44-23.893333-53.333333-53.333333-53.333334z m-426.666667 106.666666c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z m320 0c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z" p-id="3986"></path></svg></a><a href="https://discord.gg/CqsUMPZ3nd" aria-label="link Discord" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="22" height="22"><path d="M404.992 156.992L380 160s-112.128 12.256-194.016 78.016h-0.96l-1.024 0.96c-18.368 16.896-26.368 37.664-39.008 68.032a982.08 982.08 0 0 0-37.984 112C83.264 504.864 64 608.864 64 704v8l4 8c29.632 52 82.24 85.12 131.008 108 48.736 22.88 90.88 35.008 120 36l19.008 0.992 9.984-16.992 35.008-62.016c37.12 8.384 79.872 14.016 128.992 14.016 49.12 0 91.872-5.632 128.992-14.016l35.008 62.016 10.016 16.992 18.976-0.992c29.12-0.992 71.264-13.12 120-36 48.768-22.88 101.376-56 131.008-108l4-8V704c0-95.136-19.264-199.136-43.008-284.992a982.08 982.08 0 0 0-37.984-112c-12.64-30.4-20.64-51.136-39.008-68l-0.992-1.024h-1.024C756.16 172.256 644 160 644 160l-24.992-3.008-9.024 23.008s-9.248 23.36-14.976 50.016A643.04 643.04 0 0 0 512 224c-17.12 0-46.72 1.12-83.008 6.016-5.76-26.656-15.008-50.016-15.008-50.016z m-44 73.024c1.376 4.48 2.752 8.352 4 12-41.376 10.24-85.504 25.856-125.984 50.976l33.984 54.016C356 295.488 475.232 288 512 288c36.736 0 156 7.488 239.008 59.008l33.984-54.016c-40.48-25.12-84.608-40.736-125.984-51.008 1.248-3.616 2.624-7.488 4-12 29.856 6.016 86.88 19.776 133.984 57.024-0.256 0.128 12 18.624 23.008 44.992 11.264 27.136 23.744 63.264 35.008 104 21.632 78.112 38.624 173.248 40 256.992-20.16 30.752-57.504 58.496-97.024 77.024a311.808 311.808 0 0 1-77.984 24.96L704 768c9.504-3.52 18.88-7.36 27.008-11.008 49.248-21.632 76-44.992 76-44.992l-42.016-48s-17.984 16.512-60 35.008C663.04 717.504 598.88 736 512 736s-151.008-18.496-192.992-36.992c-42.016-18.496-60-35.008-60-35.008l-42.016 48s26.752 23.36 76 44.992c8.128 3.648 17.504 7.52 27.008 11.008l-16 27.008a311.808 311.808 0 0 1-78.016-25.024c-39.488-18.496-76.864-46.24-96.96-76.992 1.344-83.744 18.336-178.88 40-256.992a917.216 917.216 0 0 1 34.976-104c11.008-26.368 23.264-44.864 23.008-44.992 47.104-37.248 104.128-51.008 133.984-56.992zM400 448c-24.736 0-46.624 14.112-60 32-13.376 17.888-20 39.872-20 64s6.624 46.112 20 64c13.376 17.888 35.264 32 60 32 24.736 0 46.624-14.112 60-32 13.376-17.888 20-39.872 20-64s-6.624-46.112-20-64c-13.376-17.888-35.264-32-60-32z m224 0c-24.736 0-46.624 14.112-60 32-13.376 17.888-20 39.872-20 64s6.624 46.112 20 64c13.376 17.888 35.264 32 60 32 24.736 0 46.624-14.112 60-32 13.376-17.888 20-39.872 20-64s-6.624-46.112-20-64c-13.376-17.888-35.264-32-60-32z m-224 64c1.76 0 4 0.64 8 6.016 4 5.344 8 14.72 8 25.984 0 11.264-4 20.64-8 26.016-4 5.344-6.24 5.984-8 5.984-1.76 0-4-0.64-8-6.016A44.832 44.832 0 0 1 384 544c0-11.264 4-20.64 8-26.016 4-5.344 6.24-5.984 8-5.984z m224 0c1.76 0 4 0.64 8 6.016 4 5.344 8 14.72 8 25.984 0 11.264-4 20.64-8 26.016-4 5.344-6.24 5.984-8 5.984-1.76 0-4-0.64-8-6.016A44.832 44.832 0 0 1 608 544c0-11.264 4-20.64 8-26.016 4-5.344 6.24-5.984 8-5.984z" p-id="5212"></path></svg></a></div><p class="pb-4 pt-2">ValueListenableBuilder 组件介绍</p></div></div></article></main><footer class="py-4 pb-12 pt-10 border-t border-dashed dark:border-primary"><div class="flex flex-wrap justify-between"><div><div class="mb-4 inline-block"><a href="/"><img class="filter dark:invert" src="/assets/kaichi.webp"/></a></div><p class="text-sm font-mono">kai chi`s personal blog. made with<!-- --> <a href="/uses" class="text-primary-light dark:text-primary-dark font-bold link_global-underline__3hxrZ"><span class="text-black dark:text-white">various tech</span></a>.</p><div class="flex py-4 space-x-6"><a href="https://github.com/kaichii" aria-label="link Github" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="20" height="20"><path d="M511.543 14.057C228.914 13.943 0 242.743 0 525.143 0 748.457 143.2 938.286 342.629 1008c26.857 6.743 22.742-12.343 22.742-25.371v-88.572C210.286 912.23 204 809.6 193.6 792.457c-21.029-35.886-70.743-45.028-55.886-62.171 35.315-18.172 71.315 4.571 113.029 66.171 30.171 44.686 89.028 37.143 118.857 29.714 6.514-26.857 20.457-50.857 39.657-69.485C248.571 727.886 181.6 629.829 181.6 513.257c0-56.571 18.629-108.571 55.2-150.514-23.314-69.143 2.171-128.343 5.6-137.143 66.4-5.943 135.429 47.543 140.8 51.771C420.914 267.2 464 261.83 512.229 261.83c48.457 0 91.657 5.6 129.714 15.885 12.914-9.828 76.914-55.771 138.628-50.171 3.315 8.8 28.229 66.628 6.286 134.857 37.029 42.057 55.886 94.514 55.886 151.2 0 116.8-67.429 214.971-228.572 243.314a145.714 145.714 0 0 1 43.543 104v128.572c0.915 10.285 0 20.457 17.143 20.457 202.4-68.229 348.114-259.429 348.114-484.686 0-282.514-229.028-511.2-511.428-511.2z" p-id="1619"></path></svg></a><a href="https://music.163.com/#/user/home?id=276894900" aria-label="link Netease" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="22" height="22"><path d="M512 938.666667C276.352 938.666667 85.333333 747.648 85.333333 512S276.352 85.333333 512 85.333333s426.666667 191.018667 426.666667 426.666667-191.018667 426.666667-426.666667 426.666667z m-46.336-445.098667c10.24-35.84 45.866667-65.749333 84.906667-70.314667 7.978667 29.610667 16.554667 58.581333 23.253333 88.021334 2.261333 9.813333 1.578667 21.12-0.768 31.018666-9.088 38.058667-53.248 52.992-84.394667 29.226667-22.613333-17.28-31.658667-47.786667-22.997333-77.952z m162.858667-8.405333c-5.333333-19.84-10.922667-39.552-16.768-60.586667 21.333333 5.546667 38.741333 15.36 53.546666 29.781333 53.632 52.096 59.093333 140.8 12.544 201.856-48.426667 63.573333-134.613333 91.050667-214.528 68.48-98.218667-27.733333-162.474667-125.952-146.816-226.816 11.690667-75.434667 54.186667-128.170667 123.733334-159.274666 17.365333-7.765333 24.746667-23.893333 17.92-39.68-6.698667-15.530667-23.04-21.504-40.277334-14.634667-116.096 46.464-184.32 176.384-156.586666 298.112 30.421333 133.034667 149.12 220.288 284.8 207.317333 73.898667-7.04 134.997333-40.448 179.882666-100.138666 64.256-85.418667 55.338667-204.074667-19.754666-277.290667-28.416-27.733333-62.762667-43.434667-101.973334-49.194667-3.541333-0.554667-9.258667-2.218667-9.898666-4.522666-3.712-13.354667-7.68-26.965333-8.789334-40.704-1.237333-15.232 12.373333-27.306667 27.733334-27.52 10.794667-0.128 18.517333 5.546667 25.728 12.8 12.928 12.8 30.037333 13.738667 42.154666 2.645333 12.373333-11.264 12.629333-28.928 0.768-43.008-24.149333-28.672-67.669333-38.016-103.68-22.314667-36.138667 15.786667-56.362667 50.645333-51.2 89.301334 1.621333 11.946667 4.693333 23.765333 7.125334 35.925333l-11.093334 3.072a164.821333 164.821333 0 0 0-89.514666 60.330667c-39.296 52.053333-39.936 120.661333-1.749334 168.405333 54.357333 68.010667 159.872 54.784 192.981334-24.234667 12.117333-28.842667 11.733333-58.368 3.712-88.106666z" p-id="3070"></path></svg></a><a href="https://space.bilibili.com/12951817" aria-label="link Bilibili" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="22" height="22"><path d="M777.514667 131.669333a53.333333 53.333333 0 0 1 0 75.434667L728.746667 255.829333h49.92A160 160 0 0 1 938.666667 415.872v320a160 160 0 0 1-160 160H245.333333A160 160 0 0 1 85.333333 735.872v-320a160 160 0 0 1 160-160h49.749334L246.4 207.146667a53.333333 53.333333 0 1 1 75.392-75.434667l113.152 113.152c3.370667 3.370667 6.186667 7.04 8.448 10.965333h137.088c2.261333-3.925333 5.12-7.68 8.490667-11.008l113.109333-113.152a53.333333 53.333333 0 0 1 75.434667 0z m1.152 231.253334H245.333333a53.333333 53.333333 0 0 0-53.205333 49.365333l-0.128 4.010667v320c0 28.117333 21.76 51.157333 49.365333 53.162666l3.968 0.170667h533.333334a53.333333 53.333333 0 0 0 53.205333-49.365333l0.128-3.968v-320c0-29.44-23.893333-53.333333-53.333333-53.333334z m-426.666667 106.666666c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z m320 0c29.44 0 53.333333 23.893333 53.333333 53.333334v53.333333a53.333333 53.333333 0 1 1-106.666666 0v-53.333333c0-29.44 23.893333-53.333333 53.333333-53.333334z" p-id="3986"></path></svg></a><a href="https://discord.gg/CqsUMPZ3nd" aria-label="link Discord" class="hover:text-primary-light dark:hover:text-primary-dark"><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="currentColor" width="22" height="22"><path d="M404.992 156.992L380 160s-112.128 12.256-194.016 78.016h-0.96l-1.024 0.96c-18.368 16.896-26.368 37.664-39.008 68.032a982.08 982.08 0 0 0-37.984 112C83.264 504.864 64 608.864 64 704v8l4 8c29.632 52 82.24 85.12 131.008 108 48.736 22.88 90.88 35.008 120 36l19.008 0.992 9.984-16.992 35.008-62.016c37.12 8.384 79.872 14.016 128.992 14.016 49.12 0 91.872-5.632 128.992-14.016l35.008 62.016 10.016 16.992 18.976-0.992c29.12-0.992 71.264-13.12 120-36 48.768-22.88 101.376-56 131.008-108l4-8V704c0-95.136-19.264-199.136-43.008-284.992a982.08 982.08 0 0 0-37.984-112c-12.64-30.4-20.64-51.136-39.008-68l-0.992-1.024h-1.024C756.16 172.256 644 160 644 160l-24.992-3.008-9.024 23.008s-9.248 23.36-14.976 50.016A643.04 643.04 0 0 0 512 224c-17.12 0-46.72 1.12-83.008 6.016-5.76-26.656-15.008-50.016-15.008-50.016z m-44 73.024c1.376 4.48 2.752 8.352 4 12-41.376 10.24-85.504 25.856-125.984 50.976l33.984 54.016C356 295.488 475.232 288 512 288c36.736 0 156 7.488 239.008 59.008l33.984-54.016c-40.48-25.12-84.608-40.736-125.984-51.008 1.248-3.616 2.624-7.488 4-12 29.856 6.016 86.88 19.776 133.984 57.024-0.256 0.128 12 18.624 23.008 44.992 11.264 27.136 23.744 63.264 35.008 104 21.632 78.112 38.624 173.248 40 256.992-20.16 30.752-57.504 58.496-97.024 77.024a311.808 311.808 0 0 1-77.984 24.96L704 768c9.504-3.52 18.88-7.36 27.008-11.008 49.248-21.632 76-44.992 76-44.992l-42.016-48s-17.984 16.512-60 35.008C663.04 717.504 598.88 736 512 736s-151.008-18.496-192.992-36.992c-42.016-18.496-60-35.008-60-35.008l-42.016 48s26.752 23.36 76 44.992c8.128 3.648 17.504 7.52 27.008 11.008l-16 27.008a311.808 311.808 0 0 1-78.016-25.024c-39.488-18.496-76.864-46.24-96.96-76.992 1.344-83.744 18.336-178.88 40-256.992a917.216 917.216 0 0 1 34.976-104c11.008-26.368 23.264-44.864 23.008-44.992 47.104-37.248 104.128-51.008 133.984-56.992zM400 448c-24.736 0-46.624 14.112-60 32-13.376 17.888-20 39.872-20 64s6.624 46.112 20 64c13.376 17.888 35.264 32 60 32 24.736 0 46.624-14.112 60-32 13.376-17.888 20-39.872 20-64s-6.624-46.112-20-64c-13.376-17.888-35.264-32-60-32z m224 0c-24.736 0-46.624 14.112-60 32-13.376 17.888-20 39.872-20 64s6.624 46.112 20 64c13.376 17.888 35.264 32 60 32 24.736 0 46.624-14.112 60-32 13.376-17.888 20-39.872 20-64s-6.624-46.112-20-64c-13.376-17.888-35.264-32-60-32z m-224 64c1.76 0 4 0.64 8 6.016 4 5.344 8 14.72 8 25.984 0 11.264-4 20.64-8 26.016-4 5.344-6.24 5.984-8 5.984-1.76 0-4-0.64-8-6.016A44.832 44.832 0 0 1 384 544c0-11.264 4-20.64 8-26.016 4-5.344 6.24-5.984 8-5.984z m224 0c1.76 0 4 0.64 8 6.016 4 5.344 8 14.72 8 25.984 0 11.264-4 20.64-8 26.016-4 5.344-6.24 5.984-8 5.984-1.76 0-4-0.64-8-6.016A44.832 44.832 0 0 1 608 544c0-11.264 4-20.64 8-26.016 4-5.344 6.24-5.984 8-5.984z" p-id="5212"></path></svg></a></div></div><div class="flex"><div style="width:150px" class="mb-4"><ul><li class="mb-4"><a href="/">Posts</a></li><li class="mb-4"><a href="/me">About me</a></li><li class="mb-4"><a href="/tags">Tags</a></li><li class="mb-4"><a href="/404">404</a></li></ul></div><div style="width:150px" class="mb-4"><ul><li class="mb-4"><a href="/">Posts</a></li><li class="mb-4"><a href="/me">About me</a></li><li class="mb-4"><a href="/tags">Tags</a></li><li class="mb-4"><a href="/404">404</a></li></ul></div></div></div><div class="font-medium text-sm font-mono">Copyright © 2021 Kai. All Right Reserved.</div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Flutter Widget: ValueListenableBuilder","date":1618358400,"slug":"flutter-widget-valuelistenablebuilder","author":"kaichi","content":"\u003cp\u003e相信大家一定用过 \u003ccode\u003esetState\u003c/code\u003e, 在 \u003ccode\u003eStatefulWidget\u003c/code\u003e 中我们常使用 \u003ccode\u003esetState\u003c/code\u003e 来更新组件状态以此来更新 ui。下面这个计数器的 🌰 大家非常熟悉。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-dart\"\u003eclass _CounterState extends State\u0026#x3C;Counter\u003e {\n  int _count = 0;\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      body: Center(\n        child: Text(\n          'You had tapped $_count.',\n        ),\n      ),\n      floatingActionButton: FloatingActionButton(\n        child: Icon(Icons.add),\n        onPressed: () =\u003e setState(() =\u003e _count++),\n      ),\n    );\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e今天给大家介绍的 \u003cstrong\u003eValueListenableBuilder\u003c/strong\u003e, 可以让我们更新的的组件状态而不需要使用\u003ccode\u003esetState\u003c/code\u003e。\u003cstrong\u003eValueListenableBuilder\u003c/strong\u003e 有两个必须必需的参数。\u003cem\u003evalueListenable\u003c/em\u003e 是 \u003cstrong\u003eValueNotifier\u003c/strong\u003e 实例，\u003cem\u003ebuilder\u003c/em\u003e 是一个回调函数，该回调函数根据所监听的值来构建组件，使用 \u003cstrong\u003eValueListenableBuilder\u003c/strong\u003e 实现一个计数器。\u003c/p\u003e\n\u003cp\u003e你会发现这样一个计数器依旧是正常工作的，既然我们没有使用 \u003ccode\u003esetState\u003c/code\u003e 方法，组件是如何更新的呢？\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eValueListenableBuilder\u003c/strong\u003e 会监听 \u003cstrong\u003eValueListenable\u003c/strong\u003e 上的任何更改，因此可以在值更改后重建 UI。这也是目前为止唯一可以基于组件当前状态重构 UI 的方法，当点击按钮使 counter 的 value 更新后，更新的也只是 Text 组件，而不需要整个页面重构。\u003c/p\u003e\n\u003cp\u003e除了上面的两个参数，\u003cstrong\u003eValueListenableBuilder\u003c/strong\u003e 还有另外一个参数 \u003cem\u003echild\u003c/em\u003e。上面的计数器 \u003cem\u003ebuilder\u003c/em\u003e 返回一个 \u003cstrong\u003eText\u003c/strong\u003e 组件展示 counter 的值，当 counter 的值改变时需要重构的组件也就是这个 \u003cstrong\u003eText\u003c/strong\u003e 组件。但有时 \u003cem\u003ebuilder\u003c/em\u003e 返回了一个非常复杂的组件，但是只有一部分组件依赖 value。这是我们就要用的 \u003cem\u003echild\u003c/em\u003e 参数，例如下面这个 🌰。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-dart\"\u003eValueListenableBuilder(\n  valueListenable: _counter,\n  builder: (context, value, child) =\u003e Container(\n    width: 200,\n    height: 200,\n    color: value % 2 == 0 ? Colors.blue : Colors.red,\n    alignment: Alignment.center,\n    child: child,\n  ),\n  child: Container(\n    color: Colors.green,\n    width: 100,\n    height: 100,\n  ),\n)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e当 value 改变时，只有外面的 \u003cstrong\u003eContainer\u003c/strong\u003e 会重构，而内部 \u003cstrong\u003eContainer\u003c/strong\u003e 则不会重构。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e记得销毁 \u003cstrong\u003eValueNotifier\u003c/strong\u003e, 避免内存泄漏。就像这样。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cpre\u003e\u003ccode class=\"language-dart\"\u003e  @override\n  void dispose() {\n    _counter.dispose();\n    super.dispose();\n  }\n\u003c/code\u003e\u003c/pre\u003e\n","excerpt":"ValueListenableBuilder 组件介绍"}},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"flutter-widget-valuelistenablebuilder"},"buildId":"GD90oZrJPf5woEluKXWyv","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-feb8a7604fa7fce626b2.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.1cddd991bfe63666dc71.js" async=""></script><script src="/_next/static/chunks/commons.3f968674ded198e62373.js" async=""></script><script src="/_next/static/chunks/main-260307c6a9ede051e356.js" async=""></script><script src="/_next/static/chunks/pages/_app-3772c090bbea1cf81484.js" async=""></script><script src="/_next/static/chunks/0879be9613c02dd19f62f704d2438c311bfd41fd.9c48058b5a830067898b.js" async=""></script><script src="/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.864bf8457325a26ebada.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-0029e7a04e9699966c2e.js" async=""></script><script src="/_next/static/GD90oZrJPf5woEluKXWyv/_buildManifest.js" async=""></script><script src="/_next/static/GD90oZrJPf5woEluKXWyv/_ssgManifest.js" async=""></script></body></html>